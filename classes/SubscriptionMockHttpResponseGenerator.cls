@isTest
public class SubscriptionMockHttpResponseGenerator implements HttpCalloutMock {
    // Implement this interface method
    Boolean newApi;
    public SubscriptionMockHttpResponseGenerator(Boolean newApi) {
        this.newApi = newApi;
    }
    
    public HTTPResponse respond(HTTPRequest req) {
        // Optionally, only send a mock response for a specific endpoint
        // and method.
       // System.assertEquals('https://ininlicensinggenerationapi.azurewebsites.net/api/GenerateMediaServer24License', req.getEndpoint());
        System.assertEquals('POST', req.getMethod());
        String xmlString;
        if(!newApi)
            xmlString = '\"<?xml version=\"1.0\"?><LicenseFiles><LicenseFile company=\"Finish Line\" bundle=\"CIC 4.0 Production Bundle\" identifier=\"163E4E8A-DD55-4F45-8B60-CF55E1350605\" productLine=\"CIC 4.0\" version=\"4.0\" replaceLicense=\"True\"><Description>Used in production settings.  Licenses are generated by selecting Ordered Items from the Account Summary.</Description><Type>Trial</Type><Features><Feature name=\"I3_FEATURE_VERSION_CIC\" /><Feature name=\"I3_FEATURE_RWP_CITY\" /><Feature name=\"I3_FEATURE_SIP\" /><Feature name=\"I3_FEATURE_SMS\" /><Feature name=\"I3_FEATURE_MEDIA_SERVERS\" /><Feature name=\"I3_FEATURE_ADVANCED_SECURITY\" /><Feature name=\"I3_FEATURE_SU_ALLOWED\" /></Features><Licenses><License name=\"I3_ACCESS_ACD_MEDIA_1\" assigned=\"142\" pooled=\"0\" value=\"142\" /><License name=\"I3_LICENSE_BASIC_STATION\" assigned=\"142\" pooled=\"0\" value=\"142\" /><License name=\"I3_ACCESS_ACD_MEDIA_2\" assigned=\"142\" pooled=\"142\" value=\"284\" /><License name=\"I3_ACCESS_SYSTEM_STATUS_SUPERVISOR_PLUGIN\" assigned=\"10\" pooled=\"6\" value=\"16\" /><License name=\"I3_ACCESS_CLIENT\" assigned=\"142\" pooled=\"0\" value=\"142\" /></Licenses><Servers><Server name=\"TEST\" identifier=\"TEST\" created=\"2018-01-28 20:49:03.000\" expires=\"2100-01-01 00:00:00.000\" hash=\"SsjRZgtjOikuN7ic6dpJRe7SMhCJsC1plODNhbPIQ6L/AieVhMFNoq6ZCdi1hzW/&#xA;MCxFgSw0eJezQYG0avkg5Tmx8E4o11zAeV56ct43I/bOgWV8BnfGYayZ79seqlN3&#xA;y5kD8zYkVoOpvehCdRV+byfoyMUuKKFWqfXIwbcvb88=&#xA;\"><InvalidatedLicenses><InvalidatedLicense identifier=\"991D793C-2019-4CBD-8FD8-1577CF531261\" /></InvalidatedLicenses></Server></Servers></LicenseFile></LicenseFiles>\"';
        else
            xmlString = '\"<?xml version=\"1.0\"?><LicenseFiles><LicenseFile company=\"Finish Line\" companyId=\"001U000000YdGkTIAV\" genesysId=\"51777\" bundle=\"CIC 4.0 Production Bundle\" identifier=\"163E4E8A-DD55-4F45-8B60-CF55E1350605\" productLine=\"CIC 4.0\" version=\"4.0\" replaceLicense=\"True\"><Description>Used in production settings.  Licenses are generated by selecting Ordered Items from the Account Summary.</Description><Type>Trial</Type><Features><Feature name=\"I3_FEATURE_VERSION_CIC\" /><Feature name=\"I3_FEATURE_RWP_CITY\" /><Feature name=\"I3_FEATURE_SIP\" /><Feature name=\"I3_FEATURE_SMS\" /><Feature name=\"I3_FEATURE_MEDIA_SERVERS\" /><Feature name=\"I3_FEATURE_ADVANCED_SECURITY\" /><Feature name=\"I3_FEATURE_SU_ALLOWED\" /></Features><Licenses><License name=\"I3_ACCESS_ACD_MEDIA_1\" assigned=\"142\" pooled=\"0\" value=\"142\" /><License name=\"I3_LICENSE_BASIC_STATION\" assigned=\"142\" pooled=\"0\" value=\"142\" /><License name=\"I3_ACCESS_ACD_MEDIA_2\" assigned=\"142\" pooled=\"142\" value=\"284\" /><License name=\"I3_ACCESS_SYSTEM_STATUS_SUPERVISOR_PLUGIN\" assigned=\"10\" pooled=\"6\" value=\"16\" /><License name=\"I3_ACCESS_CLIENT\" assigned=\"142\" pooled=\"0\" value=\"142\" /></Licenses><Servers><Server name=\"TEST\" identifier=\"TEST\" created=\"2018-01-28 20:49:03.000\" expires=\"2100-01-01 00:00:00.000\" hash=\"SsjRZgtjOikuN7ic6dpJRe7SMhCJsC1plODNhbPIQ6L/AieVhMFNoq6ZCdi1hzW/&#xA;MCxFgSw0eJezQYG0avkg5Tmx8E4o11zAeV56ct43I/bOgWV8BnfGYayZ79seqlN3&#xA;y5kD8zYkVoOpvehCdRV+byfoyMUuKKFWqfXIwbcvb88=&#xA;\"><InvalidatedLicenses><InvalidatedLicense identifier=\"991D793C-2019-4CBD-8FD8-1577CF531261\" /></InvalidatedLicenses></Server></Servers><AmazonS3Credentials userName=\"AKIAIMTO3HCQJ4TH4ULQ\" userPassword=\"FYg/8w4oq4LeVF2108OMcOASCjQZdOwG55F3sP0uvFLHe2i1CIMPnQrXbeDu9WWs&#10;JhKx+ezC/1bu8wnbPWEJ0rb4xD0ooTiIlRrH0Gj+bCuI26JIelr+vE7N1aC/+IDN&#10;k4zbflfMNmhuQfMuVOMHF+Vl0uHe2X35JUma7kd3SBM=&#10;\" hash=\"MGBrDoQ1kuqb3DHIOf8RUFmLKIcuRccKooNaVdg1iAHBDr55nPHCPJgcDyewsizy&#10;esMqYAMLW/j01FzMaKsgMHZSOGT3ml9vMh2lbIGlKuj+qEWskdkQyrI6fFcmYZcK&#10;XEPpZXCgFFiWaw7/165+R5bH81CB5UX6NlzNtoD92/o=&#10;\" /></LicenseFile></LicenseFiles>\"'; 
        // Create a fake response
        HttpResponse res = new HttpResponse();
        res.setHeader('Content-Type', 'text/xml');
        res.setBody(xmlString);
        res.setStatusCode(200);
        return res;
    }
}