@isTest
public class LMSLicenseMockHttpResponseGenerator implements HttpCalloutMock {
    // Implement this interface method
    Boolean isSip;
    public LMSLicenseMockHttpResponseGenerator(Boolean isSip) {
        this.isSip = isSip;
    }
    
    public HTTPResponse respond(HTTPRequest req) {
        // Optionally, only send a mock response for a specific endpoint
        // and method.
       // System.assertEquals('https://ininlicensinggenerationapi.azurewebsites.net/api/GenerateMediaServer24License', req.getEndpoint());
        System.assertEquals('POST', req.getMethod());
        String xmlString;
        if(!isSip)
            xmlString = '\"<?xml version=\"1.0\"?><LicenseFiles><LicenseFile company=\"Finish Line\" bundle=\"CIC 4.0 Production Bundle\" identifier=\"163E4E8A-DD55-4F45-8B60-CF55E1350605\" productLine=\"CIC 4.0\" version=\"4.0\" replaceLicense=\"True\"><Description>Used in production settings.  Licenses are generated by selecting Ordered Items from the Account Summary.</Description><Type>Trial</Type><Features><Feature name=\"I3_FEATURE_VERSION_CIC\" /><Feature name=\"I3_FEATURE_RWP_CITY\" /><Feature name=\"I3_FEATURE_SIP\" /><Feature name=\"I3_FEATURE_SMS\" /><Feature name=\"I3_FEATURE_MEDIA_SERVERS\" /><Feature name=\"I3_FEATURE_ADVANCED_SECURITY\" /><Feature name=\"I3_FEATURE_SU_ALLOWED\" /></Features><Licenses><License name=\"I3_ACCESS_ACD_MEDIA_1\" assigned=\"142\" pooled=\"0\" value=\"142\" /><License name=\"I3_LICENSE_BASIC_STATION\" assigned=\"142\" pooled=\"0\" value=\"142\" /><License name=\"I3_ACCESS_ACD_MEDIA_2\" assigned=\"142\" pooled=\"142\" value=\"284\" /><License name=\"I3_ACCESS_SYSTEM_STATUS_SUPERVISOR_PLUGIN\" assigned=\"10\" pooled=\"6\" value=\"16\" /><License name=\"I3_ACCESS_CLIENT\" assigned=\"142\" pooled=\"0\" value=\"142\" /></Licenses><Servers><Server name=\"TEST\" identifier=\"TEST\" created=\"2018-01-28 20:49:03.000\" expires=\"2100-01-01 00:00:00.000\" hash=\"SsjRZgtjOikuN7ic6dpJRe7SMhCJsC1plODNhbPIQ6L/AieVhMFNoq6ZCdi1hzW/&#xA;MCxFgSw0eJezQYG0avkg5Tmx8E4o11zAeV56ct43I/bOgWV8BnfGYayZ79seqlN3&#xA;y5kD8zYkVoOpvehCdRV+byfoyMUuKKFWqfXIwbcvb88=&#xA;\"><InvalidatedLicenses><InvalidatedLicense identifier=\"991D793C-2019-4CBD-8FD8-1577CF531261\" /></InvalidatedLicenses></Server></Servers></LicenseFile></LicenseFiles>\"';
        else
            xmlString = '\"<?xml version=\"1.0\"?>\n<LicenseFile>\n  <Servers>\n    <Server  name=\"TEST\" macAddr=\"\" version=\"4.0\" created=\"20180128214258Z\" expires=\"21000101000000Z\" description=\"Used in production settings.  Licenses are generated by selecting Ordered Items from the Account Summary.\" identifier=\"87d14b56-4b34-48b1-a3c4-86add28a28f7\" signature=\"1b1be9050bf638a713abbd10aabbf3de4eb967761763abce39b78d3c74a43447aa24e9937310006c96c8f9d5462c75ab537a357fc3a3133a9c3566233605a2d7d1eca0974723c30453230607b530c77e2d8d1296812e343709e1e3c47eb2e3c2e61f33aa678cf94a3822f2481fc93af2dd7d0a0bbfbe4b4c966df39c999f521b\">\n      <Feature name=\"I3_FEATURE_MEDIASERVER_TYPE_STANDARD\"/>\n      <License name=\"I3_LICENSE_MEDIASERVER_MAX_MEDIA_ENGINES\" value=\"32\"/>\n    </Server>\n  </Servers>\n</LicenseFile>\"';
        // Create a fake response
        HttpResponse res = new HttpResponse();
        res.setHeader('Content-Type', 'text/xml');
        res.setBody(xmlString);
        res.setStatusCode(200);
        return res;
    }
}